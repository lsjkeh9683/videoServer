<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Server - Phase 1 MVP</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Ìó§Îçî -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1>VideoFlix</h1>
                <div class="header-controls">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search videos...">
                        <button id="searchBtn">üîç</button>
                    </div>
                    <button id="uploadBtn" class="btn btn-primary">Upload</button>
                    <button id="scanBtn" class="btn btn-secondary">Scan</button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- ÌÉúÍ∑∏ ÌïÑÌÑ∞ -->
        <div class="filter-section">
            <div class="filter-header">
                <h3>Filters</h3>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <small style="color: #aaa; font-size: 12px;">üí° Click multiple tags to combine filters</small>
                    <button id="newTagBtn" class="btn btn-small">New Tag</button>
                </div>
            </div>
            <div id="tagList" class="tag-list">
                <!-- ÌÉúÍ∑∏Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
            </div>
        </div>

        <!-- ÎπÑÎîîÏò§ Í∑∏Î¶¨Îìú -->
        <main class="main-content">
            <div class="content-header">
                <h2 id="videosTitle">All Videos</h2>
                <div class="view-controls">
                    <button id="gridViewBtn" class="view-btn active">Grid</button>
                    <button id="listViewBtn" class="view-btn">List</button>
                </div>
            </div>
            
            <div id="loadingSpinner" class="loading">
                <div class="spinner"></div>
                <p>Loading videos...</p>
            </div>
            
            <div id="videoGrid" class="video-grid">
                <!-- ÎπÑÎîîÏò§ Ïπ¥ÎìúÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
            </div>
            
            <div id="emptyState" class="empty-state" style="display: none;">
                <h3>No videos found</h3>
                <p>Upload some videos or scan a directory to get started!</p>
            </div>
        </main>
    </div>

    <!-- Î™®Îã¨Îì§ -->
    
    <!-- ÏóÖÎ°úÎìú Î™®Îã¨ -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì§ Upload Video</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Îã®Í≥Ñ ÌëúÏãúÍ∏∞ -->
                <div class="upload-step-indicator">
                    <div class="step active" id="step1">1. Select File</div>
                    <div class="step" id="step2">2. Add Tags</div>
                    <div class="step" id="step3">3. Choose Thumbnail</div>
                    <div class="step" id="step4">4. Upload</div>
                </div>
                
                <!-- ÌååÏùº ÏÑ†ÌÉù Îã®Í≥Ñ (Step 1) -->
                <div id="uploadStep1" class="upload-step">
                    <div class="upload-area" id="uploadArea">
                        <input type="file" id="fileInput" accept="video/*" style="display: none;">
                        <div class="upload-placeholder">
                            <div class="upload-icon">üìÅ</div>
                            <h3>Drop video files here</h3>
                            <p>or click to browse</p>
                            <p class="upload-formats">Supported: MP4, MKV, AVI, MOV, WMV, FLV, WebM</p>
                        </div>
                    </div>
                    
                    <!-- ÏÑ†ÌÉùÎêú ÌååÏùº ÌëúÏãú Î∞è Îã§Ïùå Îã®Í≥Ñ Î≤ÑÌäº -->
                    <div id="selectedFileInfo" style="display: none; margin-top: 20px;">
                        <div class="selected-file">
                            <div class="file-icon">üé¨</div>
                            <div class="file-info">
                                <h3 id="selectedFileName">filename.mp4</h3>
                                <p id="selectedFileSize">Size: 0 MB</p>
                            </div>
                        </div>
                        <div class="step-actions" style="margin-top: 20px; text-align: right;">
                            <button id="proceedToTagsBtn" class="btn btn-primary">Next: Add Tags ‚Üí</button>
                        </div>
                    </div>
                </div>
                
                <!-- ÌÉúÍ∑∏ Ï∂îÍ∞Ä Îã®Í≥Ñ (Step 2) -->
                <div id="uploadStep2" class="upload-step" style="display: none;">
                    <div class="upload-tags-section">
                        <label for="uploadTags">Tags for this video:</label>
                        <div class="upload-tags-container" id="uploadTagsContainer">
                            <!-- ÌÉúÍ∑∏Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                        </div>
                        <div class="add-upload-tag-form">
                            <input type="text" id="newUploadTagInput" placeholder="Add tag...">
                            <button type="button" id="addUploadTagBtn" class="btn btn-small">Add</button>
                        </div>
                    </div>
                    <div class="step-actions" style="margin-top: 20px; text-align: right;">
                        <button id="backToFileBtn" class="btn btn-secondary">‚Üê Back</button>
                        <button id="proceedToThumbnailBtn" class="btn btn-primary">Next: Choose Thumbnail ‚Üí</button>
                    </div>
                </div>
                
                <!-- Ïç∏ÎÑ§Ïùº ÏÑ†ÌÉù Îã®Í≥Ñ (Step 3) -->
                <div id="uploadStep3" class="upload-step" style="display: none;">
                    <div class="upload-thumbnail-section">
                        <h3>Choose Thumbnail</h3>
                        <div id="uploadThumbnailLoadingSpinner" class="loading" style="display: none;">
                            <div class="spinner"></div>
                            <p>Generating thumbnail options...</p>
                        </div>
                        
                        <div id="uploadThumbnailGrid" class="thumbnail-grid" style="display: none;">
                            <!-- Ïç∏ÎÑ§Ïùº ÏòµÏÖòÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                        </div>
                        
                        <!-- Ïç∏ÎÑ§Ïùº ÏòµÏÖò ÏÉùÏÑ± Ïã§Ìå® Ïãú ÌëúÏãú -->
                        <div id="thumbnailFallback" style="display: none;">
                            <p style="color: #ffa500; text-align: center; margin: 20px 0;">
                                ‚ö†Ô∏è Thumbnail options could not be generated. A default thumbnail will be used.
                            </p>
                        </div>
                    </div>
                    <div class="step-actions" style="margin-top: 20px; text-align: right;">
                        <button id="backToTagsBtn" class="btn btn-secondary">‚Üê Back</button>
                        <button id="proceedToFinalBtn" class="btn btn-primary">Next: Upload ‚Üí</button>
                    </div>
                </div>

                <!-- ÏµúÏ¢Ö ÏóÖÎ°úÎìú Îã®Í≥Ñ (Step 4) -->
                <div id="uploadStep4" class="upload-step" style="display: none;">
                    <div class="upload-final-section">
                        <div class="upload-summary">
                            <h3>Ready to Upload</h3>
                            <div id="uploadSummaryContent">
                                <!-- ÏóÖÎ°úÎìú ÏöîÏïΩ Ï†ïÎ≥¥Í∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                            </div>
                        </div>
                    </div>
                    <div class="step-actions" style="margin-top: 20px; text-align: right;">
                        <button id="backToThumbnailBtn" class="btn btn-secondary">‚Üê Back</button>
                        <button id="finalUploadBtn" class="btn btn-primary">üíæ Save & Upload</button>
                    </div>
                </div>
                
                <div id="uploadProgress" class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <p class="progress-text">Uploading...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Ïä§Ï∫î Î™®Îã¨ -->
    <div id="scanModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìÅ Scan Directory</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="directoryInput">Directory Path:</label>
                    <input type="text" id="directoryInput" placeholder="C:\Videos or /home/user/videos">
                    <button id="startScanBtn" class="btn btn-primary">Start Scan</button>
                </div>
                <div id="scanProgress" class="scan-progress" style="display: none;">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Scanning directory...</p>
                    </div>
                </div>
                <div id="scanResults" class="scan-results" style="display: none;">
                    <h4>Scan Results:</h4>
                    <div id="scanResultsContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÎπÑÎîîÏò§ ÏÉÅÏÑ∏ Î™®Îã¨ -->
    <div id="videoModal" class="modal">
        <div class="modal-content video-modal-content">
            <div class="modal-header">
                <h2 id="videoTitle">Video Title</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="video-player-container">
                    <video id="videoPlayer" controls>
                        Your browser does not support the video tag.
                    </video>
                </div>
                <div class="video-details">
                    <div class="video-info">
                        <p><strong>File:</strong> <span id="videoFilename"></span></p>
                        <p><strong>Size:</strong> <span id="videoSize"></span></p>
                        <p><strong>Duration:</strong> <span id="videoDuration"></span></p>
                        <p><strong>Resolution:</strong> <span id="videoResolution"></span></p>
                    </div>
                    <div class="video-tags">
                        <h4>Tags:</h4>
                        <div id="videoTagsContainer" class="tags-container">
                            <!-- ÌÉúÍ∑∏Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                        </div>
                        <div class="add-tag-form">
                            <input type="text" id="newVideoTagInput" placeholder="Add new tag...">
                            <button id="addVideoTagBtn" class="btn btn-small">Add</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÏÉà ÌÉúÍ∑∏ Î™®Îã¨ -->
    <div id="newTagModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üè∑Ô∏è Create New Tag</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="tagNameInput">Tag Name:</label>
                    <input type="text" id="tagNameInput" placeholder="Enter tag name">
                </div>
                <div class="form-group">
                    <label for="tagColorInput">Tag Color:</label>
                    <input type="color" id="tagColorInput" value="#007bff">
                </div>
                <div class="form-actions">
                    <button id="createTagBtn" class="btn btn-primary">Create Tag</button>
                    <button class="btn btn-secondary close-btn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ïç∏ÎÑ§Ïùº ÏÑ†ÌÉù Î™®Îã¨ -->
    <div id="thumbnailModal" class="modal">
        <div class="modal-content thumbnail-modal-content">
            <div class="modal-header">
                <h2>üñºÔ∏è Choose Thumbnail</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div id="thumbnailLoadingSpinner" class="loading">
                    <div class="spinner"></div>
                    <p>Generating thumbnail options...</p>
                </div>
                
                <div id="thumbnailGrid" class="thumbnail-grid" style="display: none;">
                    <!-- Ïç∏ÎÑ§Ïùº ÏòµÏÖòÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                </div>
                
                <div class="thumbnail-actions" id="thumbnailActions" style="display: none;">
                    <button id="saveThumbnailBtn" class="btn btn-primary" disabled>Save Selection</button>
                    <button class="btn btn-secondary close-btn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>